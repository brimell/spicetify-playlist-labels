!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var o,c,s,p,u,d,e,t,i,m,f,r,y,v,a,l,n,g,h,b,w,x,S,C,E;o=Object.create,c=Object.defineProperty,s=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,u=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,i=(e=(e,t)=>function(){return t||(0,e[p(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),m=(t=(e,t,i)=>{i=null!=e?o(u(e)):{};var a=!t&&e&&e.__esModule?i:c(i,"default",{value:e,enumerable:!0}),l=e,n=void 0,r=void 0;if(l&&"object"==typeof l||"function"==typeof l)for(let e of p(l))d.call(a,e)||e===n||c(a,e,{get:()=>l[e],enumerable:!(r=s(l,e))||r.enumerable});return a})(e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}})()),f=t(i()),r={},g=[],h=[],S=x=n=l=a=v=y=null,C=w=!(b={}),E=async function(){for(;null==Spicetify||!Spicetify.showNotification;)await new Promise(e=>setTimeout(e,100));await Spicetify.Platform.RootlistAPI._events._emitter.addListener("update",()=>{L().then(e=>{b=e,w=!0,k()})});var e=document.querySelector(".main-nowPlayingBar-extraControls"),t=document.createElement("span"),i=m.default.memo(()=>{const[e,t]=(0,m.useState)(!1);var i="Button-sc-1dqy6lx-0 Button-small-small-buttonTertiary-iconOnly-isUsingKeyboard-useBrowserDefaultFocusStyle main-genericButton-button",i=e?"Button-sc-1dqy6lx-0 Button-small-small-buttonTertiary-iconOnly-isUsingKeyboard-useBrowserDefaultFocusStyle main-genericButton-button main-genericButton-buttonActive main-genericButton-buttonActiveDot ZMXGDTbwxKJhbmEDZlYy":i;return m.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Show All Playlist Labels",placement:"top"},m.default.createElement("button",{className:i,onClick:()=>{t(!e),C=!C,w=!0,k()}},m.default.createElement(Spicetify.ReactComponent.IconComponent,{dangerouslySetInnerHTML:{__html:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>'},iconSize:16})))}),i=(f.default.render(m.default.createElement(i,null),t),null!=e&&e.prepend(t),b=await L(),n=new MutationObserver(()=>{k()}),new MutationObserver(async()=>{await O()}));await O(),i.observe(document.body,{childList:!0,subtree:!0})},(async()=>{await E()})();function P(e){let i=[];return function t(e){"playlist"===e.type?i.push(e):"folder"===e.type&&e.items&&e.items.forEach(e=>t(e))}(e),i}async function L(){const a=P(await Spicetify.Platform.RootlistAPI.getContents());var e=await Promise.all(a.map(e=>async function(e){return(await Spicetify.Platform.PlaylistAPI.getContents(e)).items}(e.uri)));const l=await Promise.all(a.map(e=>{var e=e.images;return 0===e.length?null:(e=e[0].url,r[e]||async function(e){var t=Spicetify.GraphQL.Definitions["fetchExtractedColors"];return null==(e=null==(t=null==(e=null==(t=(await Spicetify.GraphQL.Request(t,{uris:[e]})).data)?void 0:t.extractedColors)?void 0:e[0])?void 0:t.colorRaw)?void 0:e.hex}(e))})),n=(l.forEach((e,t)=>{e&&(r[a[t].uri]=e)}),{});return e.forEach((e,i)=>{e.forEach(e=>{var t=e.uri;n[t]||(n[t]=[]),n[t].some(e=>e.uri===a[i].uri)||n[t].push({name:a[i].name,uri:a[i].uri,trackUid:e.uid,color:l[i],canEdit:a[i].canAdd&&a[i].canRemove})})}),n}function k(){var t;h=g;let i=(g=Array.from(document.querySelectorAll(".main-trackList-indexable"))).length!==h.length;for(let e=0;e<g.length;e++)g[e].isEqualNode(h[e])||(i=!0);i&&(v=y=null);const a=[null,null,null,null,"[index] 16px [first] 4fr [var1] 1fr [var2] 2fr [last] minmax(120px,1fr)","[index] 16px [first] 6fr [var1] 4fr [var2] 3fr [var3] 4fr [last] minmax(120px,1fr)","[index] 16px [first] 6fr [var1] 4fr [var2] 3fr [var3] minmax(120px,2fr) [var3] 2fr [last] minmax(120px,1fr)"];let l=null;document.querySelectorAll(".main-trackList-trackListHeaderRow").forEach(e=>{var t=e.querySelector(".main-trackList-rowSectionEnd"),t=parseInt(t.getAttribute("aria-colindex"));(y=y||getComputedStyle(e).gridTemplateColumns)&&a[t]&&(e.style["grid-template-columns"]=a[t],l=a[t])});for(const e of g){for(const o of e.getElementsByClassName("main-trackList-trackListRow")){r=o,n=void 0;const c=(r=Object.values(r))?(null==(n=null==(r=null==(r=null==(r=null==(r=null==(r=r[0])?void 0:r.pendingProps)?void 0:r.children[0])?void 0:r.props)?void 0:r.children)?void 0:r.props)?void 0:n.uri)||(null==(n=null==(n=null==(n=null==r?void 0:r.props)?void 0:n.children)?void 0:n.props)?void 0:n.uri)||(null==(n=null==(n=null==(n=null==(n=null==(n=null==r?void 0:r.props)?void 0:n.children)?void 0:n.props)?void 0:n.children)?void 0:n.props)?void 0:n.uri)||(null==(r=null==(n=r[0])?void 0:n.props)?void 0:r.uri):null;x===c&&Spicetify.Platform.History.location.pathname===S&&(o.click(),x=null);let e=o.querySelector(".spicetify-playlist-labels");if(w&&e&&(e.remove(),e=null),!e){var n=o.querySelector(".main-trackList-rowSectionEnd"),r=parseInt(n.getAttribute("aria-colindex"));n.setAttribute("aria-colindex",(r+1).toString()),e=document.createElement("div");const s=Spicetify.React.memo(()=>m.default.createElement(Spicetify.ReactComponent.IconComponent,{semanticColor:"textBase",dangerouslySetInnerHTML:{__html:'<svg xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.151 17.943l-4.143-4.102-4.117 4.159-1.833-1.833 4.104-4.157-4.162-4.119 1.833-1.833 4.155 4.102 4.106-4.16 1.849 1.849-4.1 4.141 4.157 4.104-1.849 1.849z" /></svg>'},width:"10px",height:"10px",viewBox:"0 0 24 24"}));f.default.render(m.default.createElement("div",{className:"spicetify-playlist-labels-container"},null==(t=b[c])?void 0:t.map(t=>{var e;return!C&&!t.canEdit||(e=t.uri.match(/spotify:playlist:(.*)/)[1],Spicetify.Platform.History.location.pathname==="/playlist/"+e)?null:m.default.createElement(Spicetify.ReactComponent.Chip,{className:"encore-dark-theme spicetify-playlist-labels-label",style:(e=t,""===Spicetify.Config.color_scheme&&e.color?{margin:0,backgroundColor:e.color}:{margin:0,backgroundColor:"var(--background-tinted-base)"}),isUsingKeyboard:!1,onClick:e=>{e.stopPropagation();e=null==(e=Spicetify.URI.fromString(t.uri))?void 0:e.toURLPath(!0);x=c,(S=e)&&Spicetify.Platform.History.push({pathname:e,search:"?uid="+t.trackUid})},size:!0,iconTrailing:t.canEdit?()=>m.default.createElement("button",{className:"spicetify-playlist-labels-remove-button",onClick:e=>{e.stopPropagation(),async function(e,t){await Spicetify.Platform.PlaylistAPI.remove(e,[{uri:t,uid:""}])}(t.uri,c),b[c]=b[c].filter(e=>e.name!==t.name),w=!0,k()}},m.default.createElement(s,{trackUri:c,playlistData:t})):()=>m.default.createElement("snan",{style:{width:"4px"}})},m.default.createElement("div",{style:{padding:"0 2px 0 6px",maxWidth:"60px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},t.name))})),e),e.setAttribute("aria-colindex",r.toString()),e.role="gridcell",e.style.display="flex",e.classList.add("main-trackList-rowSectionVariable"),e.classList.add("spicetify-playlist-labels"),o.insertBefore(e,n),v=v||getComputedStyle(o).gridTemplateColumns,a[r]&&(o.style["grid-template-columns"]=l||a[r])}}w=!1}}async function O(){a=l,(l=document.querySelector("main"))&&!l.isEqualNode(a)&&(a&&n.disconnect(),k(),n.observe(l,{childList:!0,subtree:!0}))}(async()=>{var e;document.getElementById("spicetifyDplaylistDlabels")||((e=document.createElement("style")).id="spicetifyDplaylistDlabels",e.textContent=String.raw`
  .spicetify-playlist-labels-label{font-size:12px!important;padding:0!important;white-space:nowrap;color:var(--spice-text)!important;height:18px}.spicetify-playlist-labels-container{height:var(--row-height);align-items:center;display:flex;flex-wrap:wrap;overflow:hidden;gap:calc((var(--row-height) - 36px)/ 3);padding-top:calc((var(--row-height) - 36px)/ 3);padding-bottom:calc((var(--row-height) - 36px)/ 3)}.spicetify-playlist-labels-remove-button{display:inline-flex;background:0 0;height:18px;width:18px;padding:4px;border-radius:calc(infinity * 1px);border:0}.spicetify-playlist-labels-remove-button:hover{background:rgb(0,0,0,.2)}.ChipComponent-checkbox-chip-size{margin-bottom:0!important}.ChipInnerComponent-iconTrailing-size-isUsingKeyboard{grid-gap:0px!important}
      `.trim(),document.head.appendChild(e))})()}();